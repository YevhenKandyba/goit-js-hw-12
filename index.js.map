{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst API_KEY = '47065564-a622eb5e999173b8ae38c4180';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst PER_PAGE = 15;\n\nexport async function fetchImages(query, page) {\n    const loadingSpinner = document.getElementById('loadingSpinner');\n    loadingSpinner.style.display = 'block';\n\n    try {\n        const { data } = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                per_page: PER_PAGE,\n                page,\n            },\n        });\n\n        if (data.hits.length === 0) {\n            iziToast.warning({ message: \"Sorry, no images matching your search query. Please try again!\" });\n            return { images: [], totalHits: 0 };\n        }\n\n        return { images: data.hits, totalHits: data.totalHits };\n    } catch (error) {\n        iziToast.error({ message: \"An error occurred. Please try again.\" });\n        throw error;\n    } finally {\n        loadingSpinner.style.display = 'none';\n    }\n}\n\n\n","export function renderGallery(images, append = false) {\n    const gallery = document.querySelector('.gallery');\n    const markup = images.map(img => `\n        <li class=\"foto\">\n            <a href=\"${img.largeImageURL}\">\n                <img src=\"${img.webformatURL}\" width=\"\" height=\"\" alt=\"${img.tags}\">\n            </a>\n            <ul class=\"coments\">\n                <li>\n                <p class=\"text\">Likes</p>\n                <p class=\"numb\">${img.likes}</p>\n                </li>\n                <li>\n                <p class=\"text\">Views</p>\n                <p class=\"numb\">${img.views}</p>\n                </li>\n                <li>\n                <p class=\"text\">Comments</p>\n                <p class=\"numb\">${img.comments}</p>\n                </li>\n                <li>\n                <p class=\"text\">Downloads</p>\n                <p class=\"numb\">${img.downloads}</p>\n                </li> \n            </ul>\n        </li>\n    `).join('');\n\n    if (append) {\n        gallery.insertAdjacentHTML('beforeend', markup);\n    } else {\n        gallery.innerHTML = markup;\n    }\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { fetchImages } from './js/pixabay-api.js';\nimport { renderGallery } from './js/render-functions.js';\n\nlet lightbox = new SimpleLightbox('.gallery a');\nlet query = '';\nlet page = 1;\nlet totalHits = 0;\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.createElement('button');\nloadMoreBtn.textContent = 'Load more';\nloadMoreBtn.classList.add('form-btn-lm');\nloadMoreBtn.style.display = 'none';\ndocument.body.appendChild(loadMoreBtn);\n\nform.addEventListener('submit', async function (event) {\n    event.preventDefault();\n    query = event.target.elements.query.value.trim();\n    page = 1;\n\n    if (!query) {\n        iziToast.warning({ message: \"Please enter a search query.\" });\n        return;\n    }\n\n    gallery.innerHTML = '';\n    loadMoreBtn.style.display = 'none';\n\n    try {\n        const { images, totalHits: hits } = await fetchImages(query, page);\n        totalHits = hits;\n\n        if (images.length === 0) return;\n\n        renderGallery(images);\n        lightbox.refresh();\n\n        if (images.length < totalHits) {\n            loadMoreBtn.style.display = 'block';\n        }\n    } catch (error) {\n        console.error(\"Error fetching images:\", error);\n    }\n});\n\nloadMoreBtn.addEventListener('click', async function () {\n    page += 1;\n\n    try {\n        const { images } = await fetchImages(query, page);\n\n        if (images.length === 0) {\n            loadMoreBtn.style.display = 'none';\n            iziToast.info({ message: \"We're sorry, but you've reached the end of search results.\" });\n            return;\n        }\n\n        renderGallery(images, true);\n        lightbox.refresh();\n\n        if (gallery.children.length >= totalHits) {\n            loadMoreBtn.style.display = 'none';\n            iziToast.info({ message: \"We're sorry, but you've reached the end of search results.\" });\n        }\n\n        // Smooth scroll\n        const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth',\n        });\n    } catch (error) {\n        console.error(\"Error fetching images:\", error);\n    }\n});\n"],"names":["API_KEY","BASE_URL","PER_PAGE","fetchImages","query","page","loadingSpinner","data","axios","iziToast","error","renderGallery","images","append","gallery","markup","img","lightbox","SimpleLightbox","totalHits","form","loadMoreBtn","event","hits","cardHeight"],"mappings":"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"}